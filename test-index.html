<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>name lastname | website</title>

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Barlow:wght@400;500;600&family=Source+Code+Pro:wght@400;600&display=swap" rel="stylesheet">

  <style>
    body {
      margin: 15px;
      background-color: #ffffff;
      font-family: 'Barlow', sans-serif;
      color: #000;
    }

    .editor {
      --gutter-width: 1.5em;
      --code-indent: calc(var(--gutter-width) + 1.5em);
      counter-reset: line;

      --active-bg: rgba(37, 99, 235, 0.08);
      --hover-bg: rgba(37, 99, 235, 0.04);
      --caret: #2563eb;
    }

    /* Keep the "editor" parts monospace */
    .title,
    .toggle,
    .line,
    .line::before,
    .comment,
    .block-line {
      font-family: 'Source Code Pro', monospace;
    }

    /* Title row */
    .title-row {
      display: flex;
      align-items: center;
      gap: 0.5em;
      padding-left: var(--code-indent);
      margin-bottom: 12px;
      user-select: none;
    }

    /* Arrow button — aligned to gutter (NAV arrow stays unchanged) */
    .toggle {
      border: none;
      background: none;
      padding: 0;
      color: #6b7280;
      cursor: pointer;
      line-height: 1;
      width: var(--gutter-width);
      text-align: right;
      margin-left: calc(-1 * var(--code-indent));
    }

    .toggle:focus,
    .toggle:focus-visible {
      outline: none;
    }

    .title {
      font-size: 18px;
      font-weight: 600;
      margin: 0;
    }

    /* Numbered lines */
    .line {
      position: relative;
      padding-left: var(--code-indent);
      line-height: 1.8;
    }

    .line::before {
      counter-increment: line;
      content: counter(line);
      position: absolute;
      left: 0;
      width: var(--gutter-width);
      text-align: right;
      color: #9aa0a6;
      font-weight: 400;
      font-variant-numeric: tabular-nums;
    }

    /* Hover line highlight */
    .line:hover {
      background-color: var(--hover-bg);
    }

    /* Hover number color */
    .line:hover::before {
      color: var(--caret);
    }

    /* Comment-green nav items */
    .comment {
      color: #2ea043;
      text-decoration: none;
    }

    .comment:hover {
      text-decoration: underline;
      color: #000;
    }

    /* Collapsed state */
    .is-collapsed .nav {
      display: none;
    }

    /* ---- Active nav line behavior ---- */

    .nav .line {
      cursor: pointer;
      user-select: none;
    }

    .nav .line.is-active {
      background-color: var(--active-bg);
    }

    /* Left selection bar (caret) */
    .nav .line.is-active::after {
      content: "";
      position: absolute;
      left: 0;
      top: 0.15em;
      bottom: 0.15em;
      width: 3px;
      background: var(--caret);
      border-radius: 2px;
    }

    .nav .line.is-active::before {
      color: var(--caret);
      font-weight: 600;
    }

    .nav .line.is-active .comment {
      color: #000;
      text-decoration: none;
    }

    /* Hide // prefix only on active line */
    .nav .line.is-active .prefix {
      visibility: hidden;
    }

    /* ---- Gutter divider ONLY for nav ---- */
    .nav {
      position: relative;
    }

    .nav::before {
      content: "";
      position: absolute;
      top: 0;
      bottom: 0;
      left: calc(var(--gutter-width) + 0.75em);
      width: 1px;
      background: rgba(156, 163, 175, 0.35);
      pointer-events: none;
    }

    /* ---- Content blocks (only one visible at a time) ---- */

    .content {
      margin-top: 22px;
    }

    .block {
      margin: 18px 0 34px 0;
      display: none;
    }

    .block.is-visible {
      display: block;
    }

    .block-line {
      padding-left: var(--code-indent);
      line-height: 1.8;
      color: #2563eb;
      font-weight: 600;
      position: relative; /* needed so section toggles can sit in the gutter */
    }

    /* Make only the opening section lines clickable */
    .block-head {
      cursor: pointer;
      user-select: none;
    }

    .block-body {
      padding-left: calc(var(--code-indent) + 1.5em);
      margin: 10px 0;
    }

    /* ---------- Section collapsible arrows (section gutter width only) ---------- */
    .block-toggle {
      position: absolute;
      left: 0;
      top: 0;
      bottom: 0;
      width: 2.5em;          /* section gutter width (keep) */
      text-align: right;
      border: none;
      background: none;
      padding: 0;
      margin: 0;
      color: #6b7280;
      cursor: pointer;
      line-height: 1.8;    /* match block-line */
      font: inherit;       /* match Source Code Pro */
      font-weight: 400;
    }

    .block-toggle:focus,
    .block-toggle:focus-visible {
      outline: none;
    }

    /* Collapsed bodies (per section) */
    .block.is-about-collapsed #aboutBody { display: none; }
    .block.is-languages-collapsed #languagesBody { display: none; }
    .block.is-education-collapsed #educationBody { display: none; }
    .block.is-research-collapsed #researchBody { display: none; }
    .block.is-toolbox-collapsed #toolboxBody { display: none; }
    .block.is-sound-collapsed #soundBody { display: none; }
    .block.is-teaching-collapsed #teachingBody { display: none; }
    .block.is-contact-collapsed #contactBody { display: none; }

    .profile-container {
      display: flex;
      gap: 18px;
      align-items: flex-start;
      flex-wrap: wrap;
    }

    .profile {
      width: 180px;
      max-width: 40vw;
      height: auto;
      border-radius: 2px;
    }

    /* text align values adjusted */
    .text {
      max-width: 600px;
      font-family: 'Barlow', sans-serif;
    }

    .text p {
      margin: 0 0 12px 0;
      font-size: 15px;
      line-height: 1.55;
    }

    .block-body .text p:last-child {
    margin-bottom: 0;
    }


    .media {
      margin-top: 18px;
    }

    .mapa {
      max-width: 580px;
      width: 100%;
      height: auto;
    }

    /* ---------- Sound Atlas styles ---------- */
    .section-title {
      font-size: 18px;
      font-weight: 600;
      margin: 2px 0 14px 0;
    }

    .image-row {
      display: grid;
      grid-template-columns: repeat(2, minmax(0, 1fr));
      gap: 10px;
      margin: 10px 0 14px 0;
      max-width: 590px;
    }

    .image-row img {
      width: 100%;
      height: auto;
      display: block;
      border-radius: 2px;
    }

    .hover-underline {
      text-decoration: none;
      border-bottom: 1px solid rgba(0,0,0,0.25);
    }

    .hover-underline:hover {
      border-bottom-color: rgba(0,0,0,0.7);
    }

    .audio-card {
      max-width: 560px;
      margin: 18px 0 14px 0;
      padding: 14px 14px 12px 14px;
      border: 1px solid #fa9b9b;
      border-radius: 10px;
      background: #fffbe6;
    }

    .audio-title {
      font-weight: 600;
      margin-bottom: 6px;
    }

    .audio-note {
      font-weight: 400;
      color: rgba(0,0,0,0.55);
      font-size: 14px;
    }

    .audio-meta {
      color: rgba(0,0,0,0.7);
      font-size: 14px;
      line-height: 1.45;
      margin-bottom: 10px;
    }

    audio {
      width: 100%;
    }

    /* ---------------------------
       Subtle gallery + lightbox (aligned with your text column)
       --------------------------- */
    .gallery {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;  /* align left with text */
      gap: 10px;
      margin: 26px 0 8px;
      max-width: 600px;            /* match .text */
    }

    .gallery figure {
      margin: 0;
    }

    .gallery img {
      width: 120px;
      height: 90px;
      object-fit: cover;
      border-radius: 8px;
      opacity: 0.9;
      cursor: pointer;
      transition: transform 0.25s ease, opacity 0.25s ease;
      box-shadow: 0 1px 4px rgba(0,0,0,0.06);
      display: block;
    }

    .gallery img:hover {
      transform: translateY(-2px) scale(1.03);
      opacity: 1;
    }

    .gallery-caption {
      text-align: center;            /* align with text */
      font-size: 13px;
      color: #555;
      margin: 6px 0 2px;
      font-style: italic;
      max-width: 600px;            /* match .text */
    }

    .footnote {
      max-width: 600px;
      margin: 14px 0 0 0;
      font-size: 13px;
      line-height: 1.5;
      font-style: italic;
      color: rgba(0,0,0,0.75);
      text-align: left;
    }

    /* Lightbox modal */
    .lightbox {
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,0.7);
      display: none;
      align-items: center;
      justify-content: center;
      padding: 24px;
      z-index: 9999;
    }
    .lightbox.open { display: flex; }

    .lightbox-inner {
      position: relative;
      max-width: 92vw;
      max-height: 92vh;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    .lightbox img {
      max-width: 90vw;
      max-height: 82vh;
      border-radius: 12px;
      box-shadow: 0 2px 20px rgba(0,0,0,0.35);
      display: block;
    }

    .lb-btn {
      position: absolute;
      top: 50%;
      transform: translateY(-50%);
      border: none;
      background: rgba(255,255,255,0.9);
      color: #0c6bd2;
      width: 36px;
      height: 36px;
      border-radius: 50%;
      cursor: pointer;
      font-size: 18px;
      line-height: 1;
    }
    .lb-prev { left: -46px; }
    .lb-next { right: -46px; }

    .lb-close {
      position: absolute;
      top: -44px;
      right: -4px;
      border: none;
      background: rgba(255,255,255,0.95);
      color: #333;
      border-radius: 999px;
      padding: 4px 10px;
      font-size: 16px;
      cursor: pointer;
    }

    .lb-caption {
      position: absolute;
      bottom: -34px;
      left: 0;
      right: 0;
      text-align: center;
      color: #fff;
      font-size: 14px;
      line-height: 1.3;
      opacity: 0.9;
    }

    /* Mobile responsiveness */
    @media (max-width: 768px) {
      body { margin: 20px; }
      .image-row { grid-template-columns: 1fr; }
      .image-row img { max-width: 100%; }
    }

    @media (max-width: 640px) {
      .gallery { max-width: 100%; gap: 8px; }
      .gallery img { width: 29vw; height: 22vw; }
      .lb-prev { left: -36px; }
      .lb-next { right: -36px; }
    }
  </style>
</head>

<body>
  <div class="editor" id="editor">
    <div class="title-row" id="titleRow" role="button" tabindex="0" aria-controls="nav" aria-expanded="true">
      <button class="toggle" id="toggleBtn" aria-label="Collapse navigation">▾</button>
      <h1 class="title">name lastname</h1>
    </div>

    <div class="nav" id="nav">
      <div class="line">
        <a class="comment" href="#about"><span class="prefix">//</span> about</a>
      </div>
      <div class="line">
        <a class="comment" href="#research"><span class="prefix">//</span> research</a>
      </div>
      <div class="line">
        <a class="comment" href="#sound-atlas"><span class="prefix">//</span> sound atlas</a>
      </div>
      <div class="line">
        <a class="comment" href="#teaching"><span class="prefix">//</span> teaching</a>
      </div>
      <div class="line">
        <a class="comment" href="#contact"><span class="prefix">//</span> contact</a>
      </div>
    </div>

    <div class="content" id="content">
      <!-- ABOUT (contains .about and .contact, aligned) -->
      <div id="about" class="block">

        <!-- .about -->
        <div class="block-line block-head">
          <button class="block-toggle" id="aboutToggle" aria-label="Collapse about section" aria-expanded="true">▾</button>
          .about {
        </div>

        <div class="block-body" id="aboutBody">
          <div class="profile-container">
            <div class="text">
              <p><strong>I am a geographer with over a decade of experience collaborating with communities and organizations across Latin America and Amazonia.</strong> I work with digital mapping tools and methods to support social and environmental justice struggles.</p>
              <p>I specialize in community-based mapping methods, including facilitating field trainings, designing data stewardship strategies, and producing maps for legal advocacy. My approach is grounded in long-term partnerships and a commitment to challenging dominant narratives by centering local and Indigenous perspectives.</p>
            </div>
          </div>
        </div>

        <div class="block-line">}</div>

<!-- .languages (NEW, aligned with .about) -->
<div class="block-line block-head">
  <button class="block-toggle" id="languagesToggle" aria-label="Collapse languages section" aria-expanded="true">▾</button>
  .languages {
</div>

<div class="block-body" id="languagesBody">
  <div class="text">
    <p><strong>Fluent:</strong> English, Spanish, Italian, Albanian;</p>
    <p><strong>Intermediate-Advanced:</strong> Brazilian Portuguese;</p>
    <p><strong>Basic:</strong> Kichwa.</p>
  </div>
</div>

<div class="block-line">}</div>

<!-- .education (NEW, aligned with .about) -->
<div class="block-line block-head">
  <button class="block-toggle" id="educationToggle" aria-label="Collapse education section" aria-expanded="true">▾</button>
  .education {
</div>


        <div class="block-body" id="educationBody">
          <div class="text">
            <p><strong>BA in Geography.</strong> University of Massachusetts Amherst.</p>
            <p><strong>Certificate in Geographic Information Science and Technology.</strong> UMass Amherst.</p>
            <p><strong>Current MA/PhD Student.</strong> University of North Carolina at Chapel Hill.</p>

       
          </div>
        </div>

        <div class="block-line">}</div>

      </div>

      <!-- RESEARCH -->
      <div id="research" class="block">
        <div class="block-line block-head">
          <button class="block-toggle" id="researchToggle" aria-label="Collapse research section" aria-expanded="true">▾</button>
          .research {
        </div>

        <div class="block-body" id="researchBody">
          <div class="text">

            <p>My work centers around community-based digital methods with a focus on mapping, data sovereignty, and the development of culturally responsive digital tools and archives.</p>
            <p>Since 2012, I have collaborated with Indigenous communities and organizations across the Amazon regions of Ecuador, Peru, and Colombia to map ancestral territories and monitor threats to land, culture, and collective rights. I have also worked on applied research and advocacy projects in the United States, Albania, Greece, Paraguay, Mozambique, and Kenya.</p>
            <p>Over the years, I have learned that successful community-based work begins with careful listening and is sustained through iterative practice.</p>

          </div>
        </div>

        <div class="block-line">}</div>
      <!-- .toolbox (NEW, inside research) -->
<div class="block-line block-head">
  <button class="block-toggle" id="toolboxToggle" aria-label="Collapse toolbox section" aria-expanded="true">▾</button>
  .toolbox {
</div>

<div class="block-body" id="toolboxBody">
  <div class="text">
    <p>My practice integrates diverse cartographic tools and media, including but not limited to: <strong>pen, paper, oral narratives, audiovisual recordings, historical maps, QGIS, the ArcGIS Suite, Adobe Illustrator, Leaflet, Mapbox, JavaScript, html, and CSS.</strong></p>
     
    <div class="media">
              <img src="./images/mapa.png" alt="Participatory mapping work" class="mapa" loading="lazy" />
            </div>
  </div>
</div>

<div class="block-line">}</div>

</div>

      <!-- SOUND ATLAS -->
      <div id="sound-atlas" class="block">
        <div class="block-line block-head">
          <button class="block-toggle" id="soundToggle" aria-label="Collapse sound atlas section" aria-expanded="true">▾</button>
          .soundAtlas {
        </div>

        <div class="block-body" id="soundBody">
          <div class="section-title">Atlas of Albanian Sound</div>

          <div class="image-row">
            <img src="./images/sound2.png" alt="Sound Image 1" loading="lazy">
            <img src="./images/sound3.png" alt="Sound Image 2" loading="lazy">
          </div>

          <div class="text">
            <p>Started in 2023, the Atlas of Albanian Sound is an ongoing creative project that maps the entanglements of music, memory, and place during an often overlooked period: early 20th century Albania. The fall of the Ottoman Empire and the redrawing of nation-state borders across the Balkans displaced and attempted to erase many communities, particularly Muslim, Roma, and Jewish groups. For Albanian communities, these new borders reconfigured life and mobility in significant ways. Bringing together 78 rpm recordings, discographies, and historical research, this project traces sonic geographies across Albania and its diasporas by uncovering the music and the musicians who carried their stories through sound.</p>

            <p>Through collaborations with private collectors in the US and Greece, I am currently digitizing and remastering more than 300 songs originally pressed on shellac discs—from the first known recording of the Albanian language in 1906 to the haunting voice of
              <a class="hover-underline" href="https://www.youtube.com/watch?v=z8SRLunraPo" target="_blank" rel="noopener noreferrer">Hafize Asllani</a>
              in Leskovik, Labë
              <a class="hover-underline" href="https://www.nts.live/shows/guests/episodes/albanian-iso-polyphony-27th-april-2017" target="_blank" rel="noopener noreferrer">iso-polyphonies</a>,
              highland <em>çifteli</em> riffs, the marching-band anthems once performed for King Zog... and everything in between. I am also building a digital database that documents the songs, the musicians, and the communities behind them. The goal is to share these recordings through a freely accessible interactive archive, where sound, place, and history can be explored together.</p>

            <p>As a geographer, I am interested in how speaking and listening—or, the <em><strong>oral</strong></em> and the <strong><em>aural</em></strong>—can serve as cartographic method, and how this in turn can reveal connections, displacements, and resonances that remain invisible on conventional maps and archives. Through this work, I've come to understand sound and music as living, collective spaces of memory, and as invitations to reimagine how we chart and navigate our world(s).</p>

            <p>What sorts of cartographies emerge from these songs?</p>
            <p>Can the map serve as archive?</p>
            <p>Can the archive serve as map?</p>
            <p>How does past resonate with present?</p>

            <p>Sound is the territory. Listening is the atlas.*</p>
          </div>

          <div class="audio-card">
            <div class="audio-title">
              Valle Me Dy — Konitsa <span class="audio-note">(real name unknown)</span>
            </div>
            <div class="audio-meta">
              Recorded in Athens, 1947, on the Balkan label.<br>
              Courtesy of Christopher King. Transfer by Ina Shkurti.
            </div>

            <audio
              id="valleAudio"
              controls
              preload="metadata"
              controlsList="nodownload noplaybackrate noremoteplayback"
              oncontextmenu="return false"
            >
              Your browser does not support the audio element.
            </audio>
          </div>

          <div class="text">
            <p><em>This project is a labor of love and has benefited greatly from the generosity of the collectors, musicians, elders, and scholars who have shared their knowledge and time with me.</em></p>
            <p><em>Interactive map archive coming soon.</em></p>
          </div>

          <div class="gallery" id="gallery">
            <img src="./images/atlas1.jpg" alt="RCA Victor's Delvino Zeza Delvina." loading="lazy">
            <img src="./images/atlas2.jpg" alt="Columbia 12 incher." loading="lazy">
            <img src="./images/atlas3.jpg" alt="Building the database. Translating analog to digital." loading="lazy">
            <img src="./images/atlas4.jpg" alt="Workstation." loading="lazy">
            <img src="./images/atlas5.jpg" alt="Postcard of Roma musicians from Durrës. Circa 1930(?)" loading="lazy">
            <img src="./images/atlas6.jpg" alt="Some light reading. Edward Capps, 1963." loading="lazy">
            <img src="./images/atlas7.jpg" alt="What remains of Faik Konitza's house." loading="lazy">
            <img src="./images/atlas8.jpg" alt="A çamiko dance engraved on the entrance of Hamko's House." loading="lazy">
            <img src="./images/atlas9.jpg" alt="Cats of Konitsa. Do they speak Greek or Albanian?" loading="lazy">
            <img src="./images/atlas10.jpg" alt="Vjosa River Valley. Photo by Ina Shkurti." loading="lazy">
          </div>
          <div class="gallery-caption">Click any image to view larger</div>

          <p class="footnote">
            * Inspired by David Turnbull’s
            <a class="hover-underline" href="http://territories.indigenousknowledge.org/home/contents.html" target="_blank" rel="noopener noreferrer">
              <em>Maps Are Territories: Science Is an Atlas</em> (1989)
            </a>,
            this phrase extends his claim that maps make and organize worlds into the register of sound. I see the sonic as both <strong>being</strong> and <strong>knowing</strong>.
          </p>
        </div>

        <div class="block-line">}</div>
      </div>

      <!-- TEACHING -->
      <div id="teaching" class="block">
        <div class="block-line block-head">
          <button class="block-toggle" id="teachingToggle" aria-label="Collapse teaching section" aria-expanded="true">▾</button>
          .teaching {
        </div>

        <div class="block-body" id="teachingBody">
          <div class="text">
            <p>Add your teaching content here.</p>
          </div>
        </div>
        <div class="block-line">}</div>
      </div>

      <!-- CV -->
      <div id="contact" class="block">
        <div class="block-line block-head">
          <button class="block-toggle" id="contactToggle" aria-label="Collapse contact section" aria-expanded="true">▾</button>
          .contact {
        </div>

        <div class="block-body" id="contactBody">
          <div class="text">
           <p><strong>Open to collaborations.</strong></p>

            <p>You can reach me at: arupomaps<strong>[at]</strong>gmail<strong>[dot]</strong>com.</p>
            <p>
              <a
                href="https://www.linkedin.com/in/inashkurti"
                target="_blank"
                rel="noopener noreferrer"
                class="hover-underline"
              >
                LinkedIn
              </a>
            </p>
          </div>
        </div>

        <div class="block-line">}</div>
      </div>
    </div>
  </div>

  <!-- Lightbox modal -->
  <div class="lightbox" id="lightbox" aria-hidden="true" role="dialog" aria-label="Image viewer">
    <div class="lightbox-inner">
      <button class="lb-btn lb-prev" id="lbPrev" aria-label="Previous image">‹</button>
      <img id="lbImg" alt="">
      <button class="lb-btn lb-next" id="lbNext" aria-label="Next image">›</button>
      <button class="lb-close" id="lbClose" aria-label="Close">Close ✕</button>
      <div class="lb-caption" id="lbCaption"></div>
    </div>
  </div>

  <script>
    // ---------- Nav collapse ----------
    const editor = document.getElementById('editor');
    const titleRow = document.getElementById('titleRow');
    const toggleBtn = document.getElementById('toggleBtn');

    const nav = document.getElementById('nav');
    const navLines = Array.from(nav.querySelectorAll('.line'));
    const blocks = Array.from(document.querySelectorAll('.block'));

    function setCollapsed(collapsed) {
      editor.classList.toggle('is-collapsed', collapsed);
      toggleBtn.textContent = collapsed ? '▸' : '▾';
      titleRow.setAttribute('aria-expanded', String(!collapsed));
      toggleBtn.setAttribute('aria-label', collapsed ? 'Expand navigation' : 'Collapse navigation');
    }

    function toggleNav() {
      const collapsed = editor.classList.contains('is-collapsed');
      setCollapsed(!collapsed);
    }

    toggleBtn.addEventListener('click', (e) => {
      e.stopPropagation();
      toggleNav();
    });

    titleRow.addEventListener('click', toggleNav);

    titleRow.addEventListener('keydown', (e) => {
      if (e.key === 'Enter' || e.key === ' ') {
        e.preventDefault();
        toggleNav();
      }
    });

    function setActiveLine(lineEl) {
      navLines.forEach(el => el.classList.remove('is-active'));
      if (lineEl) lineEl.classList.add('is-active');
    }

    function showBlock(id) {
      blocks.forEach(b => b.classList.remove('is-visible'));
      const target = document.getElementById(id);
      if (target) target.classList.add('is-visible');
    }

    function getIdFromHash() {
      const hash = (window.location.hash || '#about').replace('#', '');
      return hash || 'about';
    }

    function syncUI() {
      const id = getIdFromHash();
      showBlock(id);

      const line = navLines.find(lineEl => {
        const a = lineEl.querySelector('a');
        return a && a.getAttribute('href') === '#' + id;
      });
      setActiveLine(line || navLines[0]);
    }

    navLines.forEach((lineEl) => {
      const link = lineEl.querySelector('a');
      if (!link) return;

      lineEl.addEventListener('click', (e) => {
        const isModifiedClick = e.metaKey || e.ctrlKey || e.shiftKey || e.altKey;
        if (isModifiedClick) return;

        e.preventDefault();
        window.location.hash = link.getAttribute('href');
      });

      link.addEventListener('click', (e) => {
        const isModifiedClick = e.metaKey || e.ctrlKey || e.shiftKey || e.altKey;
        if (isModifiedClick) return;

        e.preventDefault();
        window.location.hash = link.getAttribute('href');
      });
    });

    window.addEventListener('hashchange', syncUI);
    syncUI();

    // ---------- Section collapse (ABOUT/CONTACT/RESEARCH/SOUND/TEACHING/CONTACT) ----------
    (function initSectionCollapses() {
      const sections = [
        { id: 'about',       toggleId: 'aboutToggle',    bodyId: 'aboutBody',    cls: 'is-about-collapsed',    label: 'about' },
        { id: 'about', toggleId: 'languagesToggle', bodyId: 'languagesBody', cls: 'is-languages-collapsed', label: 'languages' },
        { id: 'about',       toggleId: 'educationToggle',  bodyId: 'educationBody',  cls: 'is-education-collapsed',  label: 'education' },
        
        { id: 'research',    toggleId: 'researchToggle', bodyId: 'researchBody', cls: 'is-research-collapsed', label: 'research' },
        { id: 'research', toggleId: 'toolboxToggle', bodyId: 'toolboxBody', cls: 'is-toolbox-collapsed', label: 'toolbox' },

        { id: 'sound-atlas', toggleId: 'soundToggle',    bodyId: 'soundBody',    cls: 'is-sound-collapsed',    label: 'sound atlas' },
        { id: 'teaching',    toggleId: 'teachingToggle', bodyId: 'teachingBody', cls: 'is-teaching-collapsed', label: 'teaching' },
        
        { id: 'contact',          toggleId: 'contactToggle',       bodyId: 'contactBody',       cls: 'is-contact-collapsed',       label: 'contact' },
      ];

      function setCollapsed(blockEl, toggleEl, headEl, collapsed, label, cls, bodyId) {
        blockEl.classList.toggle(cls, collapsed);
        toggleEl.textContent = collapsed ? '▸' : '▾';
        toggleEl.setAttribute('aria-expanded', String(!collapsed));
        toggleEl.setAttribute('aria-label', collapsed ? `Expand ${label} section` : `Collapse ${label} section`);

        if (headEl) {
          headEl.setAttribute('aria-expanded', String(!collapsed));
          headEl.setAttribute('aria-controls', bodyId);
        }
      }

      sections.forEach(s => {
        const blockEl = document.getElementById(s.id);
        const toggleEl = document.getElementById(s.toggleId);
        const bodyEl = document.getElementById(s.bodyId);
        if (!blockEl || !toggleEl || !bodyEl) return;

        const headEl = toggleEl.closest('.block-head');

        // Make the opening line behave like a button (click + keyboard)
        if (headEl) {
          headEl.setAttribute('role', 'button');
          headEl.setAttribute('tabindex', '0');
        }

        function toggleSection() {
          const collapsed = blockEl.classList.contains(s.cls);
          setCollapsed(blockEl, toggleEl, headEl, !collapsed, s.label, s.cls, s.bodyId);
        }

        // Initialize expanded
        setCollapsed(blockEl, toggleEl, headEl, false, s.label, s.cls, s.bodyId);

        // Toggle via arrow button
        toggleEl.addEventListener('click', (e) => {
          e.stopPropagation();
          toggleSection();
        });

        // Toggle via clicking the section title line itself
        if (headEl) {
          headEl.addEventListener('click', (e) => {
            // If the click originated from the button, the button handler already ran.
            if (e.target && e.target.closest && e.target.closest('button')) return;
            toggleSection();
          });

          headEl.addEventListener('keydown', (e) => {
            if (e.key === 'Enter' || e.key === ' ') {
              e.preventDefault();
              toggleSection();
            }
          });
        }
      });
    })();

    // ---------- Disable right-click on audio ----------
    document.addEventListener('contextmenu', (e) => {
      if (e.target.closest && e.target.closest('audio')) e.preventDefault();
    });

    // ---------- Mount audio ----------
    (async function mountAudio() {
      const audio = document.getElementById('valleAudio');
      if (!audio) return;

      const srcPath = './audio/812-A.mp3';
      try {
        const res = await fetch(srcPath, { credentials: 'same-origin' });
        if (!res.ok) throw new Error('HTTP ' + res.status);
        const blob = await res.blob();
        const url = URL.createObjectURL(blob);
        audio.src = url;
        audio.load();
        window.addEventListener('beforeunload', () => URL.revokeObjectURL(url));
      } catch (err) {
        audio.src = srcPath;
        audio.load();
      }
    })();

    // ---------- Gallery Lightbox ----------
    (function initLightbox() {
      const gallery = document.getElementById('gallery');
      if (!gallery) return;

      const items = Array.from(gallery.querySelectorAll('img'));
      if (!items.length) return;

      const lb = document.getElementById('lightbox');
      const lbImg = document.getElementById('lbImg');
      const lbCaption = document.getElementById('lbCaption');
      const prevBtn = document.getElementById('lbPrev');
      const nextBtn = document.getElementById('lbNext');
      const closeBtn = document.getElementById('lbClose');

      let index = 0;

      function open(i) {
        index = i;
        const img = items[index];
        lbImg.src = img.src;
        lbImg.alt = img.alt || '';
        lbCaption.textContent = img.dataset.caption || img.alt || '';
        lb.classList.add('open');
        lb.setAttribute('aria-hidden', 'false');
        document.body.style.overflow = 'hidden';
      }

      function close() {
        lb.classList.remove('open');
        lb.setAttribute('aria-hidden', 'true');
        document.body.style.overflow = '';
      }

      function go(delta) {
        index = (index + delta + items.length) % items.length;
        const img = items[index];
        lbImg.src = img.src;
        lbImg.alt = img.alt || '';
        lbCaption.textContent = img.dataset.caption || img.alt || '';
      }

      items.forEach((img, i) => {
        img.addEventListener('click', () => open(i));
      });

      prevBtn.addEventListener('click', () => go(-1));
      nextBtn.addEventListener('click', () => go(1));
      closeBtn.addEventListener('click', close);

      lb.addEventListener('click', (e) => {
        if (e.target === lb) close();
      });

      document.addEventListener('keydown', (e) => {
        if (!lb.classList.contains('open')) return;
        if (e.key === 'Escape') close();
        if (e.key === 'ArrowLeft') go(-1);
        if (e.key === 'ArrowRight') go(1);
      });

      let startX = 0, down = false;
      lbImg.addEventListener('pointerdown', (e) => { down = true; startX = e.clientX; });
      lbImg.addEventListener('pointerup', (e) => {
        if (!down) return;
        const dx = e.clientX - startX;
        if (dx < -40) go(1);
        if (dx > 40) go(-1);
        down = false;
      });
      lbImg.addEventListener('pointercancel', () => { down = false; });
    })();
  </script>
</body>
</html>
